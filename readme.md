露天矿多车协同调度系统
项目概述
露天矿多车协同调度系统是一个基于Python的综合解决方案，旨在优化露天矿场中多辆车辆的路径规划和任务调度。系统结合了骨干路径网络、高效路径规划算法和车辆协同调度机制，能够有效处理复杂矿区环境中的车辆调度问题，提高运输效率并减少资源浪费。
主要功能包括：

矿区环境建模与可视化
骨干路径网络生成与管理
多车辆路径规划与冲突避免
基于ECBS(Enhanced Conflict-Based Search)的车辆协同调度
交通流量管理与路径优化
可视化监控与交互操作界面

系统特点

骨干路径网络: 预计算关键区域之间的最优路径，减少实时计算负担
冲突检测与解决: 自动识别并解决车辆间潜在的路径冲突
高效路径规划: 结合RRT(Rapidly-exploring Random Tree)和Reed-Shepp曲线的路径规划
多车辆协同: 基于ECBS算法的多车辆协同调度
交互式GUI: 直观的用户界面，支持实时监控和手动控制
模拟环境: 支持自定义矿区地图和运输任务

系统要求

Python 3.7+
PyQt5
NumPy
Matplotlib (用于调试可视化)

安装步骤

克隆项目到本地：

bashgit clone https://github.com/yourusername/openpit-mine-scheduling.git
cd openpit-mine-scheduling

创建并激活虚拟环境：

bashpython -m venv venv
source venv/bin/activate  # 在Windows上使用 venv\Scripts\activate

安装依赖包：

bashpip install numpy matplotlib pyqt5

运行系统：

bashpython main.py
项目结构
项目由以下主要组件构成：

environment.py: 矿区环境模型，管理地图、障碍物和关键点
backbone_network.py: 骨干路径网络，优化预计算的路径
path_planner.py: 路径规划器，连接车辆与骨干路径网络
vehicle_scheduler.py: 车辆调度器，管理任务分配和执行
traffic_manager.py: 交通管理器，检测并解决路径冲突
path_utils.py: 路径工具函数，提供路径平滑和优化功能
vehicle_model.py: 车辆运动学模型，模拟车辆移动
mine_loader.py: 矿区加载器，加载地图文件
gui.py: 图形用户界面，提供交互功能

使用指南
基本操作流程

加载环境：

点击"打开地图"按钮，选择矿区地图文件(JSON格式)
点击"加载环境"按钮，系统将解析地图并显示矿区


生成骨干网络：

切换到"路径"选项卡
点击"生成骨干路径网络"按钮，系统将自动计算并显示骨干路径


车辆操作：

切换到"车辆"选项卡
选择车辆，可查看详细信息
使用"分配任务"、"前往装载点"等按钮控制车辆


任务管理：

切换到"任务"选项卡
创建任务模板
使用"自动分配任务"按钮将任务分配给车辆


运行模拟：

调整模拟速度
点击"开始"按钮启动模拟
使用"暂停"和"重置"按钮控制模拟过程



GUI界面说明
系统界面主要分为以下几个部分：

左侧控制面板：包含环境、路径、车辆和任务等选项卡
右侧显示区域：实时显示矿区环境和车辆动态
状态栏：显示系统状态和提示信息
工具栏：提供常用操作的快捷按钮

环境选项卡

加载和管理矿区地图
控制模拟参数和运行状态

路径选项卡

生成和管理骨干路径网络
配置ECBS参数
显示路径统计信息

车辆选项卡

查看和控制单个车辆
分配和管理车辆任务
显示车辆详细状态

任务选项卡

创建任务模板
自动分配任务
查看任务统计信息

关键概念解析
骨干路径网络
骨干路径网络是一种高效的路径管理方法，通过预先计算和优化关键点之间的路径，减少实时路径规划的计算负担，并提供更加稳定和可预测的车辆行驶模式。
系统会自动计算装载点、卸载点和停车区之间的最优路径，并进行平滑和简化处理。骨干路径网络支持路径复用，显著提高了路径规划效率。
ECBS车辆调度
ECBS增强版车辆调度器，结合了ECBS原理进行任务协调和冲突解决。
系统使用以下策略处理车辆冲突：

ECBS: 生成无冲突的协同路径
优先级: 基于车辆优先级进行路径调整
时间窗口: 通过调整车辆速度避免冲突

路径冲突检测
系统能够检测多种类型的路径冲突：

顶点冲突：两辆车同时在同一位置
边冲突：两辆车交叉穿越同一区域
追逐冲突：两辆车在同一路径上可能发生追尾

地图文件格式
系统支持JSON格式的矿区地图文件，包含以下主要内容：

矿区尺寸和网格分辨率
障碍物位置
装载点、卸载点和停车区位置
车辆初始位置和参数

示例：
json{
  "width": 500,
  "height": 500,
  "resolution": 1.0,
  "obstacles": [
    {"x": 100, "y": 100, "width": 50, "height": 50},
    {"x": 300, "y": 200, "width": 80, "height": 30}
  ],
  "loading_points": [
    {"x": 50, "y": 50, "theta": 0.0}
  ],
  "unloading_points": [
    {"x": 450, "y": 450, "theta": 0.0}
  ],
  "vehicles": [
    {"id": "vehicle_1", "x": 50, "y": 20, "theta": 0.0, "type": "dump_truck", "max_load": 100}
  ]
}
进阶功能
自定义车辆参数
系统支持调整车辆的多种参数：

车辆尺寸和最大载重
最小转弯半径
速度限制

ECBS参数调整
在路径选项卡中，您可以调整以下ECBS参数：

子最优界：控制路径规划的次优性范围
解决策略：选择冲突解决方法
检测范围：调整冲突检测的距离阈值

批量任务规划
系统支持批量规划和分配任务，可以同时为多辆车辆创建协调的任务计划，提高整体运输效率。
问题排查

系统启动失败：

检查依赖包是否完整安装
确保Python版本兼容（推荐3.7+）


地图加载错误：

确认JSON格式正确无误
检查文件路径是否包含特殊字符


路径规划失败：

检查起点和终点是否可达
调整骨干路径网络参数


车辆冲突频繁：

增大检测范围
尝试不同的冲突解决策略
调整子最优界参数


GUI显示问题：

更新显卡驱动
尝试降低矿区尺寸或复杂度



开发扩展
添加新的任务类型
可以通过扩展vehicle_scheduler.py中的任务类型实现更复杂的任务：
python# 创建新任务
task = VehicleTask(
    task_id="custom_task_1",
    task_type="custom_task_type",
    start=current_position,
    goal=target_position,
    priority=2
)
自定义冲突解决策略
通过修改traffic_manager.py中的冲突解决逻辑，可以实现自定义的冲突解决策略。
扩展环境模型
可以通过修改environment.py添加更多环境特性，如天气条件、路面状态等。
版本历史

v1.0.0: 初始版本，基本功能实现
未来计划:

支持更多类型的车辆模型
添加数据统计和分析工具
优化大规模场景下的性能



致谢
感谢所有为本项目提供支持和建议的人员。项目中使用的ECBS算法基于相关学术研究成果。
许可证
本项目采用 MIT 许可证。
联系方式
如有任何问题或建议，请联系：2290765342@qq.com